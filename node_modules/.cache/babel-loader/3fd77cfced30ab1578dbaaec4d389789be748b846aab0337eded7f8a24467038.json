{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MessageButton = void 0;\nconst api_1 = require(\"../api\");\nconst button_1 = require(\"./button\");\nconst Helpers_1 = require(\"../../Helpers\");\nconst Password_1 = require(\"../../Password\");\nconst inspect_1 = require(\"../../inspect\");\nclass MessageButton {\n  [inspect_1.inspect.custom]() {\n    return (0, Helpers_1.betterConsoleLog)(this);\n  }\n  constructor(client, original, chat, bot, msgId) {\n    this.button = original;\n    this._bot = bot;\n    this._chat = chat;\n    this._msgId = msgId;\n    this._client = client;\n  }\n  get client() {\n    return this._client;\n  }\n  get text() {\n    return !(this.button instanceof button_1.Button) ? this.button.text : \"\";\n  }\n  get data() {\n    if (this.button instanceof api_1.Api.KeyboardButtonCallback) {\n      return this.button.data;\n    }\n  }\n  get inlineQuery() {\n    if (this.button instanceof api_1.Api.KeyboardButtonSwitchInline) {\n      return this.button.query;\n    }\n  }\n  get url() {\n    if (this.button instanceof api_1.Api.KeyboardButtonUrl) {\n      return this.button.url;\n    }\n  }\n  /**\n   * Emulates the behaviour of clicking this button.\n    If it's a normal `KeyboardButton` with text, a message will be\n   sent, and the sent `Message <Message>` returned.\n    If it's an inline `KeyboardButtonCallback` with text and data,\n   it will be \"clicked\" and the `BotCallbackAnswer` returned.\n    If it's an inline `KeyboardButtonSwitchInline` button, the\n   `StartBot` will be invoked and the resulting updates\n   returned.\n    If it's a `KeyboardButtonUrl`, the URL of the button will\n   be returned.\n    If it's a `KeyboardButtonRequestPhone`, you must indicate that you\n   want to ``sharePhone=True`` in order to share it. Sharing it is not a\n   default because it is a privacy concern and could happen accidentally.\n    You may also use ``sharePhone=phone`` to share a specific number, in\n   which case either `str` or `InputMediaContact` should be used.\n    If it's a `KeyboardButtonRequestGeoLocation`, you must pass a\n   tuple in ``shareGeo=[longitude, latitude]``. Note that Telegram seems\n   to have some heuristics to determine impossible locations, so changing\n   this value a lot quickly may not work as expected. You may also pass a\n   `InputGeoPoint` if you find the order confusing.\n   */\n  async click({\n    sharePhone = false,\n    shareGeo = [0, 0],\n    password\n  }) {\n    if (this.button instanceof api_1.Api.KeyboardButton) {\n      return this._client.sendMessage(this._chat, {\n        message: this.button.text,\n        parseMode: undefined\n      });\n    } else if (this.button instanceof api_1.Api.KeyboardButtonCallback) {\n      let encryptedPassword;\n      if (password != undefined) {\n        const pwd = await this.client.invoke(new api_1.Api.account.GetPassword());\n        encryptedPassword = await (0, Password_1.computeCheck)(pwd, password);\n      }\n      const request = new api_1.Api.messages.GetBotCallbackAnswer({\n        peer: this._chat,\n        msgId: this._msgId,\n        data: this.button.data,\n        password: encryptedPassword\n      });\n      try {\n        return await this._client.invoke(request);\n      } catch (e) {\n        if (e.errorMessage == \"BOT_RESPONSE_TIMEOUT\") {\n          return null;\n        }\n        throw e;\n      }\n    } else if (this.button instanceof api_1.Api.KeyboardButtonSwitchInline) {\n      return this._client.invoke(new api_1.Api.messages.StartBot({\n        bot: this._bot,\n        peer: this._chat,\n        startParam: this.button.query\n      }));\n    } else if (this.button instanceof api_1.Api.KeyboardButtonUrl) {\n      return this.button.url;\n    } else if (this.button instanceof api_1.Api.KeyboardButtonGame) {\n      const request = new api_1.Api.messages.GetBotCallbackAnswer({\n        peer: this._chat,\n        msgId: this._msgId,\n        game: true\n      });\n      try {\n        return await this._client.invoke(request);\n      } catch (e) {\n        if (e.errorMessage == \"BOT_RESPONSE_TIMEOUT\") {\n          return null;\n        }\n        throw e;\n      }\n    } else if (this.button instanceof api_1.Api.KeyboardButtonRequestPhone) {\n      if (!sharePhone) {\n        throw new Error(\"cannot click on phone buttons unless sharePhone=true\");\n      }\n      if (sharePhone == true || typeof sharePhone == \"string\") {\n        const me = await this._client.getMe();\n        sharePhone = new api_1.Api.InputMediaContact({\n          phoneNumber: (sharePhone == true ? me.phone : sharePhone) || \"\",\n          firstName: me.firstName || \"\",\n          lastName: me.lastName || \"\",\n          vcard: \"\"\n        });\n      }\n      throw new Error(\"Not supported for now\");\n      // TODO\n      //return this._client.sendFile(this._chat, phoneMedia);\n    } else if (this.button instanceof api_1.Api.InputWebFileGeoPointLocation) {\n      if (!shareGeo) {\n        throw new Error(\"cannot click on geo buttons unless shareGeo=[longitude, latitude]\");\n      }\n      throw new Error(\"Not supported for now\");\n      // TODO\n      //return this._client.sendFile(this._chat, geoMedia);\n    }\n  }\n}\nexports.MessageButton = MessageButton;","map":{"version":3,"names":["Object","defineProperty","exports","value","MessageButton","api_1","require","button_1","Helpers_1","Password_1","inspect_1","inspect","custom","betterConsoleLog","constructor","client","original","chat","bot","msgId","button","_bot","_chat","_msgId","_client","text","Button","data","Api","KeyboardButtonCallback","inlineQuery","KeyboardButtonSwitchInline","query","url","KeyboardButtonUrl","click","sharePhone","shareGeo","password","KeyboardButton","sendMessage","message","parseMode","undefined","encryptedPassword","pwd","invoke","account","GetPassword","computeCheck","request","messages","GetBotCallbackAnswer","peer","e","errorMessage","StartBot","startParam","KeyboardButtonGame","game","KeyboardButtonRequestPhone","Error","me","getMe","InputMediaContact","phoneNumber","phone","firstName","lastName","vcard","InputWebFileGeoPointLocation"],"sources":["C:/Users/Rodrick/Documents/telegram-media-downloader/node_modules/telegram/tl/custom/messageButton.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MessageButton = void 0;\nconst api_1 = require(\"../api\");\nconst button_1 = require(\"./button\");\nconst Helpers_1 = require(\"../../Helpers\");\nconst Password_1 = require(\"../../Password\");\nconst inspect_1 = require(\"../../inspect\");\nclass MessageButton {\n    [inspect_1.inspect.custom]() {\n        return (0, Helpers_1.betterConsoleLog)(this);\n    }\n    constructor(client, original, chat, bot, msgId) {\n        this.button = original;\n        this._bot = bot;\n        this._chat = chat;\n        this._msgId = msgId;\n        this._client = client;\n    }\n    get client() {\n        return this._client;\n    }\n    get text() {\n        return !(this.button instanceof button_1.Button) ? this.button.text : \"\";\n    }\n    get data() {\n        if (this.button instanceof api_1.Api.KeyboardButtonCallback) {\n            return this.button.data;\n        }\n    }\n    get inlineQuery() {\n        if (this.button instanceof api_1.Api.KeyboardButtonSwitchInline) {\n            return this.button.query;\n        }\n    }\n    get url() {\n        if (this.button instanceof api_1.Api.KeyboardButtonUrl) {\n            return this.button.url;\n        }\n    }\n    /**\n     * Emulates the behaviour of clicking this button.\n\n     If it's a normal `KeyboardButton` with text, a message will be\n     sent, and the sent `Message <Message>` returned.\n\n     If it's an inline `KeyboardButtonCallback` with text and data,\n     it will be \"clicked\" and the `BotCallbackAnswer` returned.\n\n     If it's an inline `KeyboardButtonSwitchInline` button, the\n     `StartBot` will be invoked and the resulting updates\n     returned.\n\n     If it's a `KeyboardButtonUrl`, the URL of the button will\n     be returned.\n\n     If it's a `KeyboardButtonRequestPhone`, you must indicate that you\n     want to ``sharePhone=True`` in order to share it. Sharing it is not a\n     default because it is a privacy concern and could happen accidentally.\n\n     You may also use ``sharePhone=phone`` to share a specific number, in\n     which case either `str` or `InputMediaContact` should be used.\n\n     If it's a `KeyboardButtonRequestGeoLocation`, you must pass a\n     tuple in ``shareGeo=[longitude, latitude]``. Note that Telegram seems\n     to have some heuristics to determine impossible locations, so changing\n     this value a lot quickly may not work as expected. You may also pass a\n     `InputGeoPoint` if you find the order confusing.\n     */\n    async click({ sharePhone = false, shareGeo = [0, 0], password, }) {\n        if (this.button instanceof api_1.Api.KeyboardButton) {\n            return this._client.sendMessage(this._chat, {\n                message: this.button.text,\n                parseMode: undefined,\n            });\n        }\n        else if (this.button instanceof api_1.Api.KeyboardButtonCallback) {\n            let encryptedPassword;\n            if (password != undefined) {\n                const pwd = await this.client.invoke(new api_1.Api.account.GetPassword());\n                encryptedPassword = await (0, Password_1.computeCheck)(pwd, password);\n            }\n            const request = new api_1.Api.messages.GetBotCallbackAnswer({\n                peer: this._chat,\n                msgId: this._msgId,\n                data: this.button.data,\n                password: encryptedPassword,\n            });\n            try {\n                return await this._client.invoke(request);\n            }\n            catch (e) {\n                if (e.errorMessage == \"BOT_RESPONSE_TIMEOUT\") {\n                    return null;\n                }\n                throw e;\n            }\n        }\n        else if (this.button instanceof api_1.Api.KeyboardButtonSwitchInline) {\n            return this._client.invoke(new api_1.Api.messages.StartBot({\n                bot: this._bot,\n                peer: this._chat,\n                startParam: this.button.query,\n            }));\n        }\n        else if (this.button instanceof api_1.Api.KeyboardButtonUrl) {\n            return this.button.url;\n        }\n        else if (this.button instanceof api_1.Api.KeyboardButtonGame) {\n            const request = new api_1.Api.messages.GetBotCallbackAnswer({\n                peer: this._chat,\n                msgId: this._msgId,\n                game: true,\n            });\n            try {\n                return await this._client.invoke(request);\n            }\n            catch (e) {\n                if (e.errorMessage == \"BOT_RESPONSE_TIMEOUT\") {\n                    return null;\n                }\n                throw e;\n            }\n        }\n        else if (this.button instanceof api_1.Api.KeyboardButtonRequestPhone) {\n            if (!sharePhone) {\n                throw new Error(\"cannot click on phone buttons unless sharePhone=true\");\n            }\n            if (sharePhone == true || typeof sharePhone == \"string\") {\n                const me = await this._client.getMe();\n                sharePhone = new api_1.Api.InputMediaContact({\n                    phoneNumber: (sharePhone == true ? me.phone : sharePhone) || \"\",\n                    firstName: me.firstName || \"\",\n                    lastName: me.lastName || \"\",\n                    vcard: \"\",\n                });\n            }\n            throw new Error(\"Not supported for now\");\n            // TODO\n            //return this._client.sendFile(this._chat, phoneMedia);\n        }\n        else if (this.button instanceof api_1.Api.InputWebFileGeoPointLocation) {\n            if (!shareGeo) {\n                throw new Error(\"cannot click on geo buttons unless shareGeo=[longitude, latitude]\");\n            }\n            throw new Error(\"Not supported for now\");\n            // TODO\n            //return this._client.sendFile(this._chat, geoMedia);\n        }\n    }\n}\nexports.MessageButton = MessageButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}