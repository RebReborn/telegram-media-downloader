{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports._ParticipantsIter = void 0;\nexports.iterParticipants = iterParticipants;\nexports.getParticipants = getParticipants;\nexports.kickParticipant = kickParticipant;\nconst Helpers_1 = require(\"../Helpers\");\nconst requestIter_1 = require(\"../requestIter\");\nconst __1 = require(\"../\");\nconst tl_1 = require(\"../tl\");\nconst big_integer_1 = __importDefault(require(\"big-integer\"));\nconst inspect_1 = require(\"../inspect\");\nconst Utils_1 = require(\"../Utils\");\nconst _MAX_PARTICIPANTS_CHUNK_SIZE = 200;\nconst _MAX_ADMIN_LOG_CHUNK_SIZE = 100;\nconst _MAX_PROFILE_PHOTO_CHUNK_SIZE = 100;\nclass _ChatAction {\n  [inspect_1.inspect.custom]() {\n    return (0, Helpers_1.betterConsoleLog)(this);\n  }\n  constructor(client, chat, action, params = {\n    delay: 4,\n    autoCancel: true\n  }) {\n    this._client = client;\n    this._chat = chat;\n    this._action = action;\n    this._delay = params.delay;\n    this.autoCancel = params.autoCancel;\n    this._request = undefined;\n    this._task = null;\n    this._running = false;\n  }\n  async start() {\n    this._request = new tl_1.Api.messages.SetTyping({\n      peer: this._chat,\n      action: this._action\n    });\n    this._running = true;\n    this._update();\n  }\n  async stop() {\n    this._running = false;\n    if (this.autoCancel) {\n      await this._client.invoke(new tl_1.Api.messages.SetTyping({\n        peer: this._chat,\n        action: new tl_1.Api.SendMessageCancelAction()\n      }));\n    }\n  }\n  async _update() {\n    while (this._running) {\n      if (this._request != undefined) {\n        await this._client.invoke(this._request);\n      }\n      await (0, Helpers_1.sleep)(this._delay * 1000);\n    }\n  }\n  progress(current, total) {\n    if (\"progress\" in this._action) {\n      this._action.progress = 100 * Math.round(current / total);\n    }\n  }\n}\n_ChatAction._str_mapping = {\n  typing: new tl_1.Api.SendMessageTypingAction(),\n  contact: new tl_1.Api.SendMessageChooseContactAction(),\n  game: new tl_1.Api.SendMessageGamePlayAction(),\n  location: new tl_1.Api.SendMessageGeoLocationAction(),\n  \"record-audio\": new tl_1.Api.SendMessageRecordAudioAction(),\n  \"record-voice\": new tl_1.Api.SendMessageRecordAudioAction(),\n  //alias\n  \"record-round\": new tl_1.Api.SendMessageRecordRoundAction(),\n  \"record-video\": new tl_1.Api.SendMessageRecordVideoAction(),\n  audio: new tl_1.Api.SendMessageUploadAudioAction({\n    progress: 1\n  }),\n  voice: new tl_1.Api.SendMessageUploadAudioAction({\n    progress: 1\n  }),\n  // alias\n  song: new tl_1.Api.SendMessageUploadAudioAction({\n    progress: 1\n  }),\n  // alias\n  round: new tl_1.Api.SendMessageUploadRoundAction({\n    progress: 1\n  }),\n  video: new tl_1.Api.SendMessageUploadVideoAction({\n    progress: 1\n  }),\n  photo: new tl_1.Api.SendMessageUploadPhotoAction({\n    progress: 1\n  }),\n  document: new tl_1.Api.SendMessageUploadDocumentAction({\n    progress: 1\n  }),\n  file: new tl_1.Api.SendMessageUploadDocumentAction({\n    progress: 1\n  }),\n  // alias\n  cancel: new tl_1.Api.SendMessageCancelAction()\n};\nclass _ParticipantsIter extends requestIter_1.RequestIter {\n  [inspect_1.inspect.custom]() {\n    return (0, Helpers_1.betterConsoleLog)(this);\n  }\n  async _init({\n    entity,\n    filter,\n    offset,\n    search,\n    showTotal\n  }) {\n    var _a, _b;\n    if (!offset) {\n      offset = 0;\n    }\n    if (filter && filter.constructor === Function) {\n      if ([tl_1.Api.ChannelParticipantsBanned, tl_1.Api.ChannelParticipantsKicked, tl_1.Api.ChannelParticipantsSearch, tl_1.Api.ChannelParticipantsContacts].includes(filter)) {\n        filter = new filter({\n          q: \"\"\n        });\n      } else {\n        filter = new filter();\n      }\n    }\n    entity = await this.client.getInputEntity(entity);\n    const ty = __1.helpers._entityType(entity);\n    if (search && (filter || ty != __1.helpers._EntityType.CHANNEL)) {\n      // We need to 'search' ourselves unless we have a PeerChannel\n      search = search.toLowerCase();\n      this.filterEntity = entity => {\n        return __1.utils.getDisplayName(entity).toLowerCase().includes(search) || (\"username\" in entity ? entity.username || \"\" : \"\").toLowerCase().includes(search);\n      };\n    } else {\n      this.filterEntity = entity => true;\n    }\n    // Only used for channels, but we should always set the attribute\n    this.requests = [];\n    if (ty == __1.helpers._EntityType.CHANNEL) {\n      if (showTotal) {\n        const channel = await this.client.invoke(new tl_1.Api.channels.GetFullChannel({\n          channel: entity\n        }));\n        if (!(channel.fullChat instanceof tl_1.Api.ChatFull)) {\n          this.total = channel.fullChat.participantsCount;\n        }\n      }\n      if (this.total && this.total <= 0) {\n        return false;\n      }\n      this.requests.push(new tl_1.Api.channels.GetParticipants({\n        channel: entity,\n        filter: filter || new tl_1.Api.ChannelParticipantsSearch({\n          q: search || \"\"\n        }),\n        offset,\n        limit: _MAX_PARTICIPANTS_CHUNK_SIZE,\n        hash: big_integer_1.default.zero\n      }));\n    } else if (ty == __1.helpers._EntityType.CHAT) {\n      if (!(\"chatId\" in entity)) {\n        throw new Error(\"Found chat without id \" + JSON.stringify(entity));\n      }\n      const full = await this.client.invoke(new tl_1.Api.messages.GetFullChat({\n        chatId: entity.chatId\n      }));\n      if (full.fullChat instanceof tl_1.Api.ChatFull) {\n        if (!(full.fullChat.participants instanceof tl_1.Api.ChatParticipantsForbidden)) {\n          this.total = full.fullChat.participants.participants.length;\n        } else {\n          this.total = 0;\n          return false;\n        }\n        const users = new Map();\n        for (const user of full.users) {\n          users.set(user.id.toString(), user);\n        }\n        for (const participant of full.fullChat.participants.participants) {\n          const user = users.get(participant.userId.toString());\n          if (!this.filterEntity(user)) {\n            continue;\n          }\n          user.participant = participant;\n          (_a = this.buffer) === null || _a === void 0 ? void 0 : _a.push(user);\n        }\n        return true;\n      }\n    } else {\n      this.total = 1;\n      if (this.limit != 0) {\n        const user = await this.client.getEntity(entity);\n        if (this.filterEntity(user)) {\n          user.participant = undefined;\n          (_b = this.buffer) === null || _b === void 0 ? void 0 : _b.push(user);\n        }\n      }\n      return true;\n    }\n  }\n  async _loadNextChunk() {\n    var _a, _b;\n    if (!((_a = this.requests) === null || _a === void 0 ? void 0 : _a.length)) {\n      return true;\n    }\n    this.requests[0].limit = Math.min(this.limit - this.requests[0].offset, _MAX_PARTICIPANTS_CHUNK_SIZE);\n    const results = [];\n    for (const request of this.requests) {\n      results.push(await this.client.invoke(request));\n    }\n    for (let i = this.requests.length - 1; i >= 0; i--) {\n      const participants = results[i];\n      if (participants instanceof tl_1.Api.channels.ChannelParticipantsNotModified || !participants.users.length) {\n        this.requests.splice(i, 1);\n        continue;\n      }\n      this.requests[i].offset += participants.participants.length;\n      const users = new Map();\n      for (const user of participants.users) {\n        users.set(user.id.toString(), user);\n      }\n      for (const participant of participants.participants) {\n        if (!(\"userId\" in participant)) {\n          continue;\n        }\n        const user = users.get(participant.userId.toString());\n        if (this.filterEntity && !this.filterEntity(user)) {\n          continue;\n        }\n        user.participant = participant;\n        (_b = this.buffer) === null || _b === void 0 ? void 0 : _b.push(user);\n      }\n    }\n    return undefined;\n  }\n  [Symbol.asyncIterator]() {\n    return super[Symbol.asyncIterator]();\n  }\n}\nexports._ParticipantsIter = _ParticipantsIter;\nclass _AdminLogIter extends requestIter_1.RequestIter {\n  [inspect_1.inspect.custom]() {\n    return (0, Helpers_1.betterConsoleLog)(this);\n  }\n  async _init(entity, searchArgs, filterArgs) {\n    let eventsFilter = undefined;\n    if (filterArgs && Object.values(filterArgs).find(element => element === true)) {\n      eventsFilter = new tl_1.Api.ChannelAdminLogEventsFilter(Object.assign({}, filterArgs));\n    }\n    this.entity = await this.client.getInputEntity(entity);\n    const adminList = [];\n    if (searchArgs && searchArgs.admins) {\n      for (const admin of searchArgs.admins) {\n        adminList.push(await this.client.getInputEntity(admin));\n      }\n    }\n    this.request = new tl_1.Api.channels.GetAdminLog({\n      channel: this.entity,\n      q: (searchArgs === null || searchArgs === void 0 ? void 0 : searchArgs.search) || \"\",\n      minId: searchArgs === null || searchArgs === void 0 ? void 0 : searchArgs.minId,\n      maxId: searchArgs === null || searchArgs === void 0 ? void 0 : searchArgs.maxId,\n      limit: 0,\n      eventsFilter: eventsFilter,\n      admins: adminList || undefined\n    });\n  }\n  async _loadNextChunk() {\n    if (!this.request) {\n      return true;\n    }\n    this.request.limit = Math.min(this.left, _MAX_ADMIN_LOG_CHUNK_SIZE);\n    const r = await this.client.invoke(this.request);\n    const entities = new Map();\n    for (const entity of [...r.users, ...r.chats]) {\n      entities.set(__1.utils.getPeerId(entity), entity);\n    }\n    const eventIds = [];\n    for (const e of r.events) {\n      eventIds.push(e.id);\n    }\n    this.request.maxId = (0, Helpers_1.getMinBigInt)([big_integer_1.default.zero, ...eventIds]);\n    for (const ev of r.events) {\n      if (ev.action instanceof tl_1.Api.ChannelAdminLogEventActionEditMessage) {\n        // @ts-ignore\n        // TODO ev.action.prevMessage._finishInit(this.client, entities, this.entity);\n        // @ts-ignore\n        // TODO ev.action.newMessage._finishInit(this.client, entities, this.entity);\n      }\n    }\n  }\n}\n/** @hidden */\nfunction iterParticipants(client, entity, {\n  limit,\n  offset,\n  search,\n  filter,\n  showTotal = true\n}) {\n  return new _ParticipantsIter(client, limit !== null && limit !== void 0 ? limit : Number.MAX_SAFE_INTEGER, {}, {\n    entity: entity,\n    filter: filter,\n    offset: offset !== null && offset !== void 0 ? offset : 0,\n    search: search,\n    showTotal: showTotal\n  });\n}\n/** @hidden */\nasync function getParticipants(client, entity, params) {\n  const it = client.iterParticipants(entity, params);\n  return await it.collect();\n}\n/** @hidden */\nasync function kickParticipant(client, entity, participant) {\n  const peer = await client.getInputEntity(entity);\n  const user = await client.getInputEntity(participant);\n  let resp;\n  let request;\n  const type = __1.helpers._entityType(peer);\n  if (type === __1.helpers._EntityType.CHAT) {\n    request = new tl_1.Api.messages.DeleteChatUser({\n      chatId: (0, Helpers_1.returnBigInt)((0, Utils_1.getPeerId)(entity)),\n      userId: (0, Helpers_1.returnBigInt)((0, Utils_1.getPeerId)(participant))\n    });\n    resp = await client.invoke(request);\n  } else if (type === __1.helpers._EntityType.CHANNEL) {\n    if (user instanceof tl_1.Api.InputPeerSelf) {\n      request = new tl_1.Api.channels.LeaveChannel({\n        channel: peer\n      });\n      resp = await client.invoke(request);\n    } else {\n      request = new tl_1.Api.channels.EditBanned({\n        channel: peer,\n        participant: user,\n        bannedRights: new tl_1.Api.ChatBannedRights({\n          untilDate: 0,\n          viewMessages: true\n        })\n      });\n      resp = await client.invoke(request);\n      await (0, Helpers_1.sleep)(500);\n      await client.invoke(new tl_1.Api.channels.EditBanned({\n        channel: peer,\n        participant: user,\n        bannedRights: new tl_1.Api.ChatBannedRights({\n          untilDate: 0\n        })\n      }));\n    }\n  } else {\n    throw new Error(\"You must pass either a channel or a chat\");\n  }\n  return client._getResponseMessage(request, resp, entity);\n}","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","_ParticipantsIter","iterParticipants","getParticipants","kickParticipant","Helpers_1","require","requestIter_1","__1","tl_1","big_integer_1","inspect_1","Utils_1","_MAX_PARTICIPANTS_CHUNK_SIZE","_MAX_ADMIN_LOG_CHUNK_SIZE","_MAX_PROFILE_PHOTO_CHUNK_SIZE","_ChatAction","inspect","custom","betterConsoleLog","constructor","client","chat","action","params","delay","autoCancel","_client","_chat","_action","_delay","_request","undefined","_task","_running","start","Api","messages","SetTyping","peer","_update","stop","invoke","SendMessageCancelAction","sleep","progress","current","total","Math","round","_str_mapping","typing","SendMessageTypingAction","contact","SendMessageChooseContactAction","game","SendMessageGamePlayAction","location","SendMessageGeoLocationAction","SendMessageRecordAudioAction","SendMessageRecordRoundAction","SendMessageRecordVideoAction","audio","SendMessageUploadAudioAction","voice","song","SendMessageUploadRoundAction","video","SendMessageUploadVideoAction","photo","SendMessageUploadPhotoAction","document","SendMessageUploadDocumentAction","file","cancel","RequestIter","_init","entity","filter","offset","search","showTotal","_a","_b","Function","ChannelParticipantsBanned","ChannelParticipantsKicked","ChannelParticipantsSearch","ChannelParticipantsContacts","includes","q","getInputEntity","ty","helpers","_entityType","_EntityType","CHANNEL","toLowerCase","filterEntity","utils","getDisplayName","username","requests","channel","channels","GetFullChannel","fullChat","ChatFull","participantsCount","push","GetParticipants","limit","hash","default","zero","CHAT","Error","JSON","stringify","full","GetFullChat","chatId","participants","ChatParticipantsForbidden","length","users","Map","user","set","id","toString","participant","get","userId","buffer","getEntity","_loadNextChunk","min","results","request","i","ChannelParticipantsNotModified","splice","Symbol","asyncIterator","_AdminLogIter","searchArgs","filterArgs","eventsFilter","values","find","element","ChannelAdminLogEventsFilter","assign","adminList","admins","admin","GetAdminLog","minId","maxId","left","r","entities","chats","getPeerId","eventIds","e","events","getMinBigInt","ev","ChannelAdminLogEventActionEditMessage","Number","MAX_SAFE_INTEGER","it","collect","resp","type","DeleteChatUser","returnBigInt","InputPeerSelf","LeaveChannel","EditBanned","bannedRights","ChatBannedRights","untilDate","viewMessages","_getResponseMessage"],"sources":["C:/Users/Rodrick/Documents/telegram-media-downloader/node_modules/telegram/client/chats.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._ParticipantsIter = void 0;\nexports.iterParticipants = iterParticipants;\nexports.getParticipants = getParticipants;\nexports.kickParticipant = kickParticipant;\nconst Helpers_1 = require(\"../Helpers\");\nconst requestIter_1 = require(\"../requestIter\");\nconst __1 = require(\"../\");\nconst tl_1 = require(\"../tl\");\nconst big_integer_1 = __importDefault(require(\"big-integer\"));\nconst inspect_1 = require(\"../inspect\");\nconst Utils_1 = require(\"../Utils\");\nconst _MAX_PARTICIPANTS_CHUNK_SIZE = 200;\nconst _MAX_ADMIN_LOG_CHUNK_SIZE = 100;\nconst _MAX_PROFILE_PHOTO_CHUNK_SIZE = 100;\nclass _ChatAction {\n    [inspect_1.inspect.custom]() {\n        return (0, Helpers_1.betterConsoleLog)(this);\n    }\n    constructor(client, chat, action, params = {\n        delay: 4,\n        autoCancel: true,\n    }) {\n        this._client = client;\n        this._chat = chat;\n        this._action = action;\n        this._delay = params.delay;\n        this.autoCancel = params.autoCancel;\n        this._request = undefined;\n        this._task = null;\n        this._running = false;\n    }\n    async start() {\n        this._request = new tl_1.Api.messages.SetTyping({\n            peer: this._chat,\n            action: this._action,\n        });\n        this._running = true;\n        this._update();\n    }\n    async stop() {\n        this._running = false;\n        if (this.autoCancel) {\n            await this._client.invoke(new tl_1.Api.messages.SetTyping({\n                peer: this._chat,\n                action: new tl_1.Api.SendMessageCancelAction(),\n            }));\n        }\n    }\n    async _update() {\n        while (this._running) {\n            if (this._request != undefined) {\n                await this._client.invoke(this._request);\n            }\n            await (0, Helpers_1.sleep)(this._delay * 1000);\n        }\n    }\n    progress(current, total) {\n        if (\"progress\" in this._action) {\n            this._action.progress = 100 * Math.round(current / total);\n        }\n    }\n}\n_ChatAction._str_mapping = {\n    typing: new tl_1.Api.SendMessageTypingAction(),\n    contact: new tl_1.Api.SendMessageChooseContactAction(),\n    game: new tl_1.Api.SendMessageGamePlayAction(),\n    location: new tl_1.Api.SendMessageGeoLocationAction(),\n    \"record-audio\": new tl_1.Api.SendMessageRecordAudioAction(),\n    \"record-voice\": new tl_1.Api.SendMessageRecordAudioAction(), //alias\n    \"record-round\": new tl_1.Api.SendMessageRecordRoundAction(),\n    \"record-video\": new tl_1.Api.SendMessageRecordVideoAction(),\n    audio: new tl_1.Api.SendMessageUploadAudioAction({ progress: 1 }),\n    voice: new tl_1.Api.SendMessageUploadAudioAction({ progress: 1 }), // alias\n    song: new tl_1.Api.SendMessageUploadAudioAction({ progress: 1 }), // alias\n    round: new tl_1.Api.SendMessageUploadRoundAction({ progress: 1 }),\n    video: new tl_1.Api.SendMessageUploadVideoAction({ progress: 1 }),\n    photo: new tl_1.Api.SendMessageUploadPhotoAction({ progress: 1 }),\n    document: new tl_1.Api.SendMessageUploadDocumentAction({ progress: 1 }),\n    file: new tl_1.Api.SendMessageUploadDocumentAction({ progress: 1 }), // alias\n    cancel: new tl_1.Api.SendMessageCancelAction(),\n};\nclass _ParticipantsIter extends requestIter_1.RequestIter {\n    [inspect_1.inspect.custom]() {\n        return (0, Helpers_1.betterConsoleLog)(this);\n    }\n    async _init({ entity, filter, offset, search, showTotal, }) {\n        var _a, _b;\n        if (!offset) {\n            offset = 0;\n        }\n        if (filter && filter.constructor === Function) {\n            if ([\n                tl_1.Api.ChannelParticipantsBanned,\n                tl_1.Api.ChannelParticipantsKicked,\n                tl_1.Api.ChannelParticipantsSearch,\n                tl_1.Api.ChannelParticipantsContacts,\n            ].includes(filter)) {\n                filter = new filter({\n                    q: \"\",\n                });\n            }\n            else {\n                filter = new filter();\n            }\n        }\n        entity = await this.client.getInputEntity(entity);\n        const ty = __1.helpers._entityType(entity);\n        if (search && (filter || ty != __1.helpers._EntityType.CHANNEL)) {\n            // We need to 'search' ourselves unless we have a PeerChannel\n            search = search.toLowerCase();\n            this.filterEntity = (entity) => {\n                return (__1.utils\n                    .getDisplayName(entity)\n                    .toLowerCase()\n                    .includes(search) ||\n                    (\"username\" in entity ? entity.username || \"\" : \"\")\n                        .toLowerCase()\n                        .includes(search));\n            };\n        }\n        else {\n            this.filterEntity = (entity) => true;\n        }\n        // Only used for channels, but we should always set the attribute\n        this.requests = [];\n        if (ty == __1.helpers._EntityType.CHANNEL) {\n            if (showTotal) {\n                const channel = await this.client.invoke(new tl_1.Api.channels.GetFullChannel({\n                    channel: entity,\n                }));\n                if (!(channel.fullChat instanceof tl_1.Api.ChatFull)) {\n                    this.total = channel.fullChat.participantsCount;\n                }\n            }\n            if (this.total && this.total <= 0) {\n                return false;\n            }\n            this.requests.push(new tl_1.Api.channels.GetParticipants({\n                channel: entity,\n                filter: filter ||\n                    new tl_1.Api.ChannelParticipantsSearch({\n                        q: search || \"\",\n                    }),\n                offset,\n                limit: _MAX_PARTICIPANTS_CHUNK_SIZE,\n                hash: big_integer_1.default.zero,\n            }));\n        }\n        else if (ty == __1.helpers._EntityType.CHAT) {\n            if (!(\"chatId\" in entity)) {\n                throw new Error(\"Found chat without id \" + JSON.stringify(entity));\n            }\n            const full = await this.client.invoke(new tl_1.Api.messages.GetFullChat({\n                chatId: entity.chatId,\n            }));\n            if (full.fullChat instanceof tl_1.Api.ChatFull) {\n                if (!(full.fullChat.participants instanceof\n                    tl_1.Api.ChatParticipantsForbidden)) {\n                    this.total = full.fullChat.participants.participants.length;\n                }\n                else {\n                    this.total = 0;\n                    return false;\n                }\n                const users = new Map();\n                for (const user of full.users) {\n                    users.set(user.id.toString(), user);\n                }\n                for (const participant of full.fullChat.participants\n                    .participants) {\n                    const user = users.get(participant.userId.toString());\n                    if (!this.filterEntity(user)) {\n                        continue;\n                    }\n                    user.participant = participant;\n                    (_a = this.buffer) === null || _a === void 0 ? void 0 : _a.push(user);\n                }\n                return true;\n            }\n        }\n        else {\n            this.total = 1;\n            if (this.limit != 0) {\n                const user = await this.client.getEntity(entity);\n                if (this.filterEntity(user)) {\n                    user.participant = undefined;\n                    (_b = this.buffer) === null || _b === void 0 ? void 0 : _b.push(user);\n                }\n            }\n            return true;\n        }\n    }\n    async _loadNextChunk() {\n        var _a, _b;\n        if (!((_a = this.requests) === null || _a === void 0 ? void 0 : _a.length)) {\n            return true;\n        }\n        this.requests[0].limit = Math.min(this.limit - this.requests[0].offset, _MAX_PARTICIPANTS_CHUNK_SIZE);\n        const results = [];\n        for (const request of this.requests) {\n            results.push(await this.client.invoke(request));\n        }\n        for (let i = this.requests.length - 1; i >= 0; i--) {\n            const participants = results[i];\n            if (participants instanceof\n                tl_1.Api.channels.ChannelParticipantsNotModified ||\n                !participants.users.length) {\n                this.requests.splice(i, 1);\n                continue;\n            }\n            this.requests[i].offset += participants.participants.length;\n            const users = new Map();\n            for (const user of participants.users) {\n                users.set(user.id.toString(), user);\n            }\n            for (const participant of participants.participants) {\n                if (!(\"userId\" in participant)) {\n                    continue;\n                }\n                const user = users.get(participant.userId.toString());\n                if (this.filterEntity && !this.filterEntity(user)) {\n                    continue;\n                }\n                user.participant = participant;\n                (_b = this.buffer) === null || _b === void 0 ? void 0 : _b.push(user);\n            }\n        }\n        return undefined;\n    }\n    [Symbol.asyncIterator]() {\n        return super[Symbol.asyncIterator]();\n    }\n}\nexports._ParticipantsIter = _ParticipantsIter;\nclass _AdminLogIter extends requestIter_1.RequestIter {\n    [inspect_1.inspect.custom]() {\n        return (0, Helpers_1.betterConsoleLog)(this);\n    }\n    async _init(entity, searchArgs, filterArgs) {\n        let eventsFilter = undefined;\n        if (filterArgs &&\n            Object.values(filterArgs).find((element) => element === true)) {\n            eventsFilter = new tl_1.Api.ChannelAdminLogEventsFilter(Object.assign({}, filterArgs));\n        }\n        this.entity = await this.client.getInputEntity(entity);\n        const adminList = [];\n        if (searchArgs && searchArgs.admins) {\n            for (const admin of searchArgs.admins) {\n                adminList.push(await this.client.getInputEntity(admin));\n            }\n        }\n        this.request = new tl_1.Api.channels.GetAdminLog({\n            channel: this.entity,\n            q: (searchArgs === null || searchArgs === void 0 ? void 0 : searchArgs.search) || \"\",\n            minId: searchArgs === null || searchArgs === void 0 ? void 0 : searchArgs.minId,\n            maxId: searchArgs === null || searchArgs === void 0 ? void 0 : searchArgs.maxId,\n            limit: 0,\n            eventsFilter: eventsFilter,\n            admins: adminList || undefined,\n        });\n    }\n    async _loadNextChunk() {\n        if (!this.request) {\n            return true;\n        }\n        this.request.limit = Math.min(this.left, _MAX_ADMIN_LOG_CHUNK_SIZE);\n        const r = await this.client.invoke(this.request);\n        const entities = new Map();\n        for (const entity of [...r.users, ...r.chats]) {\n            entities.set(__1.utils.getPeerId(entity), entity);\n        }\n        const eventIds = [];\n        for (const e of r.events) {\n            eventIds.push(e.id);\n        }\n        this.request.maxId = (0, Helpers_1.getMinBigInt)([big_integer_1.default.zero, ...eventIds]);\n        for (const ev of r.events) {\n            if (ev.action instanceof tl_1.Api.ChannelAdminLogEventActionEditMessage) {\n                // @ts-ignore\n                // TODO ev.action.prevMessage._finishInit(this.client, entities, this.entity);\n                // @ts-ignore\n                // TODO ev.action.newMessage._finishInit(this.client, entities, this.entity);\n            }\n        }\n    }\n}\n/** @hidden */\nfunction iterParticipants(client, entity, { limit, offset, search, filter, showTotal = true }) {\n    return new _ParticipantsIter(client, limit !== null && limit !== void 0 ? limit : Number.MAX_SAFE_INTEGER, {}, {\n        entity: entity,\n        filter: filter,\n        offset: offset !== null && offset !== void 0 ? offset : 0,\n        search: search,\n        showTotal: showTotal,\n    });\n}\n/** @hidden */\nasync function getParticipants(client, entity, params) {\n    const it = client.iterParticipants(entity, params);\n    return (await it.collect());\n}\n/** @hidden */\nasync function kickParticipant(client, entity, participant) {\n    const peer = await client.getInputEntity(entity);\n    const user = await client.getInputEntity(participant);\n    let resp;\n    let request;\n    const type = __1.helpers._entityType(peer);\n    if (type === __1.helpers._EntityType.CHAT) {\n        request = new tl_1.Api.messages.DeleteChatUser({\n            chatId: (0, Helpers_1.returnBigInt)((0, Utils_1.getPeerId)(entity)),\n            userId: (0, Helpers_1.returnBigInt)((0, Utils_1.getPeerId)(participant)),\n        });\n        resp = await client.invoke(request);\n    }\n    else if (type === __1.helpers._EntityType.CHANNEL) {\n        if (user instanceof tl_1.Api.InputPeerSelf) {\n            request = new tl_1.Api.channels.LeaveChannel({\n                channel: peer,\n            });\n            resp = await client.invoke(request);\n        }\n        else {\n            request = new tl_1.Api.channels.EditBanned({\n                channel: peer,\n                participant: user,\n                bannedRights: new tl_1.Api.ChatBannedRights({\n                    untilDate: 0,\n                    viewMessages: true,\n                }),\n            });\n            resp = await client.invoke(request);\n            await (0, Helpers_1.sleep)(500);\n            await client.invoke(new tl_1.Api.channels.EditBanned({\n                channel: peer,\n                participant: user,\n                bannedRights: new tl_1.Api.ChatBannedRights({ untilDate: 0 }),\n            }));\n        }\n    }\n    else {\n        throw new Error(\"You must pass either a channel or a chat\");\n    }\n    return client._getResponseMessage(request, resp, entity);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}